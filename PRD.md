# 테슬라 주가 분석 사이트 PRD (Product Requirements Document)

**Document Version:** 1.0  
**Last Updated:** 2025-11-10  
**Document Owner:** Development Team

---

## 1. Product Overview

### 1.1 제품 개요
테슬라(TSLA) 주가 분석 사이트는 개인 투자자들이 테슬라 주식에 대한 실시간 및 과거 데이터를 분석하고, 기술적 지표를 통해 투자 판단을 내릴 수 있도록 지원하는 웹 기반 플랫폼입니다.

### 1.2 목적
- 테슬라 주가 데이터의 실시간 모니터링 및 시각화
- 기술적 분석 도구를 통한 투자 의사결정 지원
- 직관적인 차트 및 지표 제공으로 복잡한 주가 데이터 이해 용이화
- 개인 투자자들의 데이터 기반 투자 판단 지원

### 1.3 가치 제안 (Value Proposition)
- **접근성**: 복잡한 금융 플랫폼 없이도 쉽게 접근 가능한 웹 기반 서비스
- **실시간성**: 최신 주가 데이터와 기술적 지표 제공
- **시각화**: 직관적인 차트와 그래프를 통한 데이터 이해
- **무료**: 기본적인 주가 분석 기능을 무료로 제공
- **전문성**: 전문 투자 도구 수준의 기술적 지표 제공

### 1.4 핵심 목표
1. 사용자가 테슬라 주가를 실시간으로 모니터링할 수 있다
2. 다양한 기술적 지표를 통해 주가 트렌드를 분석할 수 있다
3. 직관적인 차트를 통해 주가 데이터를 쉽게 이해할 수 있다
4. 데이터 기반 투자 판단을 내릴 수 있도록 지원한다
5. 반응형 디자인으로 다양한 디바이스에서 접근 가능하다

---

## 2. Reference Services

다음 서비스들을 참고 및 벤치마킹 대상으로 설정:

### 2.1 주가 분석 플랫폼
- **Yahoo Finance**: https://finance.yahoo.com/quote/TSLA
  - 실시간 주가 정보, 차트, 뉴스 통합 제공
  - 참고 포인트: 차트 인터랙션, 기술적 지표 표시 방법

- **TradingView**: https://www.tradingview.com/symbols/NASDAQ-TSLA/
  - 고급 차트 분석 도구, 다양한 기술적 지표
  - 참고 포인트: 차트 커스터마이징, 지표 오버레이 방식

- **Investing.com**: https://www.investing.com/equities/tesla-motors
  - 주가 차트, 기술적 분석, 뉴스 피드
  - 참고 포인트: 레이아웃 구조, 정보 계층화

### 2.2 데이터 제공 서비스
- **Alpha Vantage**: https://www.alphavantage.co/
  - 실제 사용할 API 제공자
  - 무료 플랜의 제한사항 이해 및 최적화 전략 수립

- **Supabase Dashboard**: https://app.supabase.com/
  - 데이터베이스 관리 및 모니터링
  - 실시간 데이터 구독 기능 활용

---

## 3. Core Features

### 3.1 필수 기능 (Must Have)

#### 3.1.1 실시간 주가 정보 대시보드
- **기능 설명**: 현재 주가, 변동률, 거래량 등 핵심 정보 표시
- **우선순위**: P0 (최우선)
- **데이터 소스**: Alpha Vantage API (GLOBAL_QUOTE)
- **서버/클라이언트**: 서버 사이드에서 API 호출 후 클라이언트에 전달

#### 3.1.2 주가 차트 시각화
- **기능 설명**: 일별 주가 데이터를 라인/캔들스틱 차트로 표시
- **우선순위**: P0
- **데이터 소스**: Supabase (stock_prices 테이블) → Alpha Vantage API 동기화
- **서버/클라이언트**: 서버에서 데이터 조회, 클라이언트에서 차트 렌더링
- **시간 범위**: 1개월, 3개월, 6개월, 1년, 전체

#### 3.1.3 기술적 지표 계산 및 표시
- **기능 설명**: SMA, EMA, RSI, MACD, Bollinger Bands 계산 및 차트 오버레이
- **우선순위**: P0
- **데이터 소스**: 서버 사이드에서 주가 데이터 기반 계산
- **서버/클라이언트**: 서버에서 계산, 클라이언트에서 표시

#### 3.1.4 데이터 동기화 기능
- **기능 설명**: Alpha Vantage API에서 최신 데이터를 가져와 Supabase에 저장
- **우선순위**: P0
- **데이터 소스**: Alpha Vantage API → Supabase
- **서버/클라이언트**: 서버 사이드에서만 실행 (API Route)

#### 3.1.5 반응형 레이아웃
- **기능 설명**: 모바일, 태블릿, 데스크톱 환경 지원
- **우선순위**: P0
- **서버/클라이언트**: 클라이언트 사이드 반응형 처리

### 3.2 중요 기능 (Should Have)

#### 3.2.1 거래량 분석
- **기능 설명**: 거래량 차트 및 분석
- **우선순위**: P1
- **데이터 소스**: Supabase (stock_prices 테이블)

#### 3.2.2 기술적 지표 상세 분석 페이지
- **기능 설명**: 각 지표별 상세 설명 및 분석 결과
- **우선순위**: P1
- **데이터 소스**: 서버에서 계산된 기술적 지표

### 3.3 선택 기능 (Nice to Have)

#### 3.3.1 뉴스 피드
- **기능 설명**: 테슬라 관련 뉴스 표시
- **우선순위**: P2
- **데이터 소스**: Alpha Vantage NEWS_SENTIMENT API (선택적)

#### 3.3.2 알림 기능
- **기능 설명**: 주가 변동 알림 (목표가 도달 등)
- **우선순위**: P2
- **데이터 소스**: 실시간 주가 모니터링

---

## 4. Target Users

### 4.1 주요 사용자 그룹

#### 4.1.1 개인 투자자 (Primary)
- **인구통계**: 25-55세, 중산층 이상
- **행동 특성**:
  - 주식 투자에 관심이 있으나 전문 지식은 제한적
  - 테슬라 주식 투자를 고려하거나 이미 보유 중
  - 모바일 및 데스크톱 모두에서 접근
- **니즈**:
  - 쉬운 주가 확인 및 트렌드 파악
  - 기술적 분석을 통한 매수/매도 시점 판단
  - 신뢰할 수 있는 데이터 기반 의사결정

#### 4.1.2 주식 트레이더 (Secondary)
- **인구통계**: 30-50세, 금융 관련 직종 또는 전문 트레이더
- **행동 특성**:
  - 기술적 분석에 익숙함
  - 빠른 데이터 접근 및 분석 도구 필요
  - 데스크톱 중심 사용
- **니즈**:
  - 정확한 기술적 지표
  - 다양한 시간대 분석
  - 실시간 데이터 업데이트

#### 4.1.3 테슬라 관심 사용자 (Tertiary)
- **인구통계**: 20-40세, 테크 관심층
- **행동 특성**:
  - 테슬라에 대한 일반적 관심
  - 투자보다는 정보 확인 목적
  - 모바일 중심 사용
- **니즈**:
  - 간단한 주가 확인
  - 트렌드 파악
  - 접근하기 쉬운 인터페이스

### 4.2 사용자 페르소나

#### 페르소나 1: 김투자 (35세, 회사원)
- 테슬라 주식을 소량 보유한 개인 투자자
- 주로 모바일에서 주가 확인
- 기술적 분석 지식은 초보 수준
- **목표**: 투자 판단을 위한 간단한 분석 도구 필요

#### 페르소나 2: 박트레이더 (42세, 전문 트레이더)
- 주식 거래를 업으로 하는 전문가
- 데스크톱에서 상세 분석 수행
- 기술적 분석에 능숙
- **목표**: 정확한 데이터와 다양한 지표를 활용한 분석

---

## 5. Target Platforms

### 5.1 웹 플랫폼 (Primary)

#### 5.1.1 데스크톱 웹
- **브라우저 지원**: Chrome, Safari, Firefox, Edge (최신 2개 버전)
- **해상도**: 1920x1080 이상 권장, 1366x768 최소
- **기능**: 전체 기능 제공, 고해상도 차트 표시

#### 5.1.2 태블릿 웹
- **기기**: iPad, Android 태블릿
- **해상도**: 768px 이상
- **기능**: 데스크톱과 유사한 기능, 터치 최적화

#### 5.1.3 모바일 웹
- **기기**: iPhone, Android 스마트폰
- **해상도**: 375px 이상
- **기능**: 핵심 기능 제공, 간소화된 UI

### 5.2 플랫폼별 최적화 전략
- **반응형 디자인**: Tailwind CSS를 활용한 모바일 퍼스트 접근
- **터치 제스처**: 모바일에서 차트 줌인/아웃 지원
- **성능 최적화**: 모바일에서 이미지 및 데이터 최적화

### 5.3 향후 확장 가능성
- **PWA (Progressive Web App)**: 오프라인 기능, 홈 화면 추가
- **모바일 앱**: React Native를 통한 네이티브 앱 개발 (선택적)

---

## 6. Data Storage Method

### 6.1 데이터베이스 구조

#### 6.1.1 주 데이터베이스: Supabase (PostgreSQL)
- **용도**: 주가 데이터, 기술적 지표, 뉴스 데이터 저장
- **위치**: Supabase Cloud (PostgreSQL)
- **백업**: Supabase 자동 백업 활용
- **보안**: Row Level Security (RLS) 정책 적용

#### 6.1.2 데이터 테이블

**stock_prices 테이블**
- **용도**: 일별 주가 데이터 저장
- **데이터 소스**: Alpha Vantage API (TIME_SERIES_DAILY_ADJUSTED)
- **업데이트 주기**: 매일 1회 (장 마감 후)
- **보관 기간**: 무제한 (필요시 아카이빙)

**technical_indicators 테이블**
- **용도**: 계산된 기술적 지표 저장
- **데이터 소스**: 서버 사이드 계산 (stock_prices 기반)
- **업데이트 주기**: 주가 데이터 업데이트 시 함께 계산
- **보관 기간**: stock_prices와 동일

**news 테이블** (선택적)
- **용도**: 테슬라 관련 뉴스 저장
- **데이터 소스**: Alpha Vantage NEWS_SENTIMENT API
- **업데이트 주기**: 실시간 또는 주기적 크롤링
- **보관 기간**: 3개월 (최신 뉴스 우선)

### 6.2 데이터 흐름

```
Alpha Vantage API
    ↓
Next.js API Route (서버 사이드)
    ↓
Supabase Database
    ↓
Next.js API Route (서버 사이드)
    ↓
클라이언트 컴포넌트 (클라이언트 사이드)
    ↓
사용자 인터페이스
```

### 6.3 데이터 동기화 전략

#### 6.3.1 초기 데이터 로드
- Alpha Vantage API에서 최대 기간 데이터 수집
- Supabase에 일괄 저장 (upsert)

#### 6.3.2 정기 동기화
- **방법**: Next.js API Route + Cron Job (Vercel Cron)
- **주기**: 매일 장 마감 후 (미국 동부시간 기준)
- **로직**: 최신 데이터만 확인하여 업데이트

#### 6.3.3 실시간 데이터
- Alpha Vantage API의 GLOBAL_QUOTE 엔드포인트 활용
- 캐싱 전략: 최대 5분간 캐시 유지
- 클라이언트에서 주기적 폴링 (선택적)

### 6.4 데이터 보안

#### 6.4.1 API 키 보안
- **저장 위치**: 환경 변수 (.env.local)
- **접근 제어**: 서버 사이드에서만 접근
- **노출 방지**: 클라이언트 번들에 포함되지 않도록 설정

#### 6.4.2 데이터베이스 보안
- **Row Level Security (RLS)**: 공개 읽기 전용 정책
- **서비스 역할 키**: 서버 사이드에서만 사용
- **익명 키**: 클라이언트에서 읽기 전용 접근

#### 6.4.3 데이터 검증
- **입력 검증**: Zod를 활용한 스키마 검증
- **SQL Injection 방지**: Supabase 클라이언트의 파라미터화된 쿼리
- **XSS 방지**: React의 자동 이스케이프

### 6.5 데이터 백업 및 복구
- **자동 백업**: Supabase 일일 자동 백업
- **수동 백업**: 필요시 수동 백업 생성
- **복구 전략**: Point-in-time recovery 지원

---

## 7. Technology Stack

### 7.1 프론트엔드

#### 7.1.1 핵심 프레임워크
- **Next.js 15+** (App Router)
  - **용도**: 풀스택 React 프레임워크
  - **이유**: 서버 사이드 렌더링, API Routes, 최적화 기능
  - **버전**: 15.1.0

- **React 19**
  - **용도**: UI 컴포넌트 개발
  - **이유**: 컴포넌트 기반 개발, 풍부한 생태계
  - **버전**: 19.0.0

- **TypeScript 5**
  - **용도**: 타입 안정성 보장
  - **이유**: 개발 시 오류 감소, 코드 품질 향상
  - **버전**: 5.x

#### 7.1.2 스타일링
- **Tailwind CSS 3.4+**
  - **용도**: 유틸리티 기반 CSS 프레임워크
  - **이유**: 빠른 개발, 일관된 디자인, 반응형 디자인
  - **버전**: 3.4.1

- **shadcn/ui**
  - **용도**: 재사용 가능한 UI 컴포넌트
  - **이유**: 접근성, 커스터마이징, 타입 안정성
  - **컴포넌트**: Button, Card, Select, 등

#### 7.1.3 차트 라이브러리
- **Recharts 2.10+**
  - **용도**: 주가 차트 시각화
  - **이유**: React 네이티브, 반응형, 커스터마이징 가능
  - **차트 타입**: Line, Candlestick, Bar
  - **버전**: 2.10.3

#### 7.1.4 상태 관리
- **Zustand 4**
  - **용도**: 클라이언트 상태 관리
  - **이유**: 가벼움, 간단한 API, TypeScript 지원
  - **버전**: 4.x

- **React Query (TanStack Query) 5**
  - **용도**: 서버 상태 관리, 데이터 페칭
  - **이유**: 캐싱, 자동 리프레시, 에러 핸들링
  - **버전**: 5.x

#### 7.1.5 유틸리티 라이브러리
- **date-fns 4**
  - **용도**: 날짜 포맷팅 및 조작
  - **이유**: 가벼움, 함수형 API, 타입스크립트 지원

- **axios 1.7+**
  - **용도**: HTTP 클라이언트
  - **이유**: 인터셉터, 자동 JSON 변환, 에러 핸들링

- **zod 3**
  - **용도**: 스키마 검증
  - **이유**: TypeScript 통합, 런타임 검증

### 7.2 백엔드

#### 7.2.1 데이터베이스
- **Supabase (PostgreSQL)**
  - **용도**: 주가 데이터, 기술적 지표 저장
  - **이유**: 서버리스, 실시간 기능, 자동 백업
  - **버전**: 최신 버전

#### 7.2.2 데이터베이스 클라이언트
- **@supabase/supabase-js 2.39+**
  - **용도**: Supabase 클라이언트
  - **이유**: 타입 안정성, 자동 생성된 타입
  - **버전**: 2.39.0

### 7.3 외부 API

#### 7.3.1 주가 데이터 API
- **Alpha Vantage API**
  - **용도**: 주가 데이터, 기술적 지표, 뉴스
  - **엔드포인트**: 
    - `TIME_SERIES_DAILY_ADJUSTED`: 일별 주가 데이터
    - `GLOBAL_QUOTE`: 실시간 주가 정보
    - `RSI`, `MACD`, `BBANDS`: 기술적 지표 (선택적)
  - **제한사항**: 5 calls/minute, 500 calls/day (무료 플랜)

### 7.4 개발 도구

#### 7.4.1 빌드 도구
- **Turbopack** (Next.js 내장)
  - **용도**: 빠른 개발 서버 및 빌드
  - **이유**: 웹팩 대비 빠른 속도

#### 7.4.2 코드 품질
- **ESLint 9**
  - **용도**: 코드 린팅
  - **설정**: next/core-web-vitals

- **TypeScript**
  - **용도**: 타입 체킹
  - **설정**: strict mode (일부 완화)

#### 7.4.3 스타일링 도구
- **PostCSS 8**
  - **용도**: CSS 처리
  - **플러그인**: autoprefixer, tailwindcss

- **Autoprefixer 10.4+**
  - **용도**: 벤더 프리픽스 자동 추가

### 7.5 배포 및 호스팅

#### 7.5.1 프론트엔드 배포
- **Vercel**
  - **용도**: Next.js 애플리케이션 호스팅
  - **이유**: Next.js 최적화, 자동 배포, Edge Functions
  - **기능**: 환경 변수 관리, 도메인 연결, Analytics

#### 7.5.2 데이터베이스 호스팅
- **Supabase Cloud**
  - **용도**: PostgreSQL 데이터베이스 호스팅
  - **이유**: 서버리스, 자동 스케일링, 백업

#### 7.5.3 환경 변수 관리
- **Vercel Environment Variables**
  - **용도**: API 키, 데이터베이스 연결 정보
  - **보안**: 암호화 저장, 환경별 분리

### 7.6 모니터링 및 분석 (선택적)

#### 7.6.1 에러 추적
- **Sentry** (선택적)
  - **용도**: 에러 모니터링 및 추적

#### 7.6.2 분석
- **Vercel Analytics** (선택적)
  - **용도**: 사용자 행동 분석, 성능 모니터링

---

## 8. 개발 범위 정의

### 8.1 Phase 1: 기초 설정 및 인프라 (1주)

#### 8.1.1 프로젝트 초기화
- [x] Next.js 프로젝트 생성 및 설정
- [x] TypeScript 설정
- [x] Tailwind CSS 설정
- [x] shadcn/ui 컴포넌트 설치
- [x] 기본 의존성 설치

#### 8.1.2 Supabase 설정
- [x] Supabase 프로젝트 생성
- [x] 데이터베이스 스키마 정의 및 생성
- [x] Row Level Security (RLS) 정책 설정
- [x] Supabase 클라이언트 설정 (서버/클라이언트)

#### 8.1.3 Alpha Vantage API 연동
- [x] Alpha Vantage API 클라이언트 구현
- [x] 환경 변수 설정
- [x] API 호출 함수 구현
- [x] 에러 핸들링

#### 8.1.4 기본 레이아웃
- [x] Header 컴포넌트
- [x] Footer 컴포넌트
- [x] 레이아웃 구조 설정
- [x] 네비게이션 구조

### 8.2 Phase 2: 핵심 기능 개발 (2주)

#### 8.2.1 주가 데이터 관리
- [x] API Route 구현 (`/api/stock/price`)
- [x] API Route 구현 (`/api/stock/quote`)
- [x] API Route 구현 (`/api/stock/sync`)
- [x] 데이터베이스 CRUD 함수 구현
- [ ] 데이터 동기화 스케줄링 (Cron Job)

#### 8.2.2 홈 페이지 개발
- [x] 실시간 주가 정보 표시
- [x] 주가 카드 컴포넌트
- [x] 데이터 동기화 버튼
- [ ] 로딩 상태 처리
- [ ] 에러 상태 처리

#### 8.2.3 차트 페이지 개발
- [x] 차트 페이지 기본 구조
- [x] Recharts 라이브러리 연동
- [x] 시간 범위 선택 기능
- [ ] 캔들스틱 차트 구현
- [ ] 거래량 차트 구현
- [ ] 차트 인터랙션 (줌, 팬)

### 8.3 Phase 3: 고급 기능 개발 (2주)

#### 8.3.1 기술적 지표 계산
- [x] SMA 계산 함수
- [x] EMA 계산 함수
- [x] RSI 계산 함수
- [x] MACD 계산 함수
- [x] Bollinger Bands 계산 함수
- [ ] 서버 사이드 지표 계산 및 저장
- [ ] 지표 데이터베이스 저장

#### 8.3.2 분석 페이지 개발
- [x] 분석 페이지 기본 구조
- [ ] 기술적 지표 차트 표시
- [ ] 지표별 상세 분석
- [ ] 트렌드 분석
- [ ] 통계 정보 표시

#### 8.3.3 차트 고도화
- [ ] 기술적 지표 오버레이
- [ ] 이동평균선 표시
- [ ] Bollinger Bands 표시
- [ ] RSI 차트
- [ ] MACD 차트

### 8.4 Phase 4: 최적화 및 개선 (1주)

#### 8.4.1 성능 최적화
- [ ] 이미지 최적화
- [ ] 코드 스플리팅
- [ ] 데이터 캐싱 전략
- [ ] ISR (Incremental Static Regeneration) 활용
- [ ] API 응답 시간 최적화

#### 8.4.2 반응형 디자인
- [ ] 모바일 레이아웃 최적화
- [ ] 태블릿 레이아웃 최적화
- [ ] 터치 제스처 지원
- [ ] 모바일 차트 최적화

#### 8.4.3 사용자 경험 개선
- [ ] 로딩 스켈레톤
- [ ] 에러 메시지 개선
- [ ] 토스트 알림
- [ ] 접근성 개선 (a11y)

### 8.5 Phase 5: 테스트 및 배포 (1주)

#### 8.5.1 테스트
- [ ] 단위 테스트 (선택적)
- [ ] 통합 테스트 (선택적)
- [ ] E2E 테스트 (선택적)
- [ ] 수동 테스트

#### 8.5.2 배포
- [ ] Vercel 배포 설정
- [ ] 환경 변수 설정
- [ ] 도메인 연결 (선택적)
- [ ] 모니터링 설정

### 8.6 개발 범위에서 제외된 항목

#### 8.6.1 사용자 인증
- 사용자 회원가입/로그인 기능 제외
- 개인화 기능 제외
- 포트폴리오 관리 기능 제외

#### 8.6.2 실시간 알림
- 푸시 알림 기능 제외
- 이메일 알림 기능 제외
- 목표가 알림 기능 제외 (향후 추가 가능)

#### 8.6.3 뉴스 기능
- 뉴스 피드 기본 구조는 포함하나, 실제 뉴스 데이터 연동은 선택적

#### 8.6.4 여러 주식 지원
- 현재는 테슬라(TSLA)만 지원
- 다른 주식 추가 기능은 향후 확장

---

## 9. 사용자 Use Case

### Use Case 1: 실시간 주가 확인

**액터**: 개인 투자자 (김투자)  
**전제 조건**: 웹 브라우저 접근 가능  
**목표**: 테슬라 현재 주가 및 변동률 확인

**시나리오**:
1. 사용자가 웹사이트에 접속
2. 홈 페이지에서 현재 주가 정보 확인
3. 주가, 변동률, 거래량 등 핵심 정보 확인
4. 상승/하락 여부를 색상으로 구분하여 확인

**데이터 소스**: 
- 서버: Alpha Vantage API (GLOBAL_QUOTE) 또는 Supabase (최신 데이터)
- 클라이언트: 서버에서 받은 데이터를 UI에 표시

**성공 조건**: 
- 현재 주가가 정확하게 표시됨
- 변동률이 정확하게 계산되어 표시됨
- 로딩 시간이 3초 이내

**예외 상황**:
- API 호출 실패 시 에러 메시지 표시
- 데이터가 없을 경우 안내 메시지 표시

---

### Use Case 2: 주가 차트 분석

**액터**: 주식 트레이더 (박트레이더)  
**전제 조건**: 웹 브라우저 접근 가능, 차트 페이지 접근  
**목표**: 과거 주가 트렌드 분석을 통한 투자 판단

**시나리오**:
1. 사용자가 "Chart" 페이지로 이동
2. 시간 범위 선택 (1개월, 3개월, 6개월, 1년, 전체)
3. 주가 차트 확인 (라인 또는 캔들스틱)
4. 거래량 차트 확인
5. 트렌드를 분석하여 매수/매도 시점 판단

**데이터 소스**: 
- 서버: Supabase (stock_prices 테이블)에서 기간별 데이터 조회
- 클라이언트: 서버에서 받은 데이터를 Recharts로 시각화

**성공 조건**: 
- 선택한 시간 범위의 차트가 정확하게 표시됨
- 차트가 인터랙티브하게 동작 (호버, 줌 등)
- 로딩 시간이 2초 이내

**예외 상황**:
- 데이터가 부족할 경우 안내 메시지 표시
- 차트 렌더링 실패 시 에러 메시지 표시

---

### Use Case 3: 기술적 지표 분석

**액터**: 주식 트레이더 (박트레이더)  
**전제 조건**: 웹 브라우저 접근 가능, 분석 페이지 접근  
**목표**: 기술적 지표를 통한 상세 분석

**시나리오**:
1. 사용자가 "Analysis" 페이지로 이동
2. 기술적 지표 선택 (SMA, EMA, RSI, MACD, Bollinger Bands)
3. 각 지표의 현재 값 확인
4. 지표 차트 확인
5. 지표 해석을 통한 투자 신호 확인

**데이터 소스**: 
- 서버: Supabase (technical_indicators 테이블) 또는 실시간 계산
- 클라이언트: 서버에서 받은 지표 데이터를 차트로 표시

**성공 조건**: 
- 기술적 지표가 정확하게 계산되어 표시됨
- 지표 차트가 명확하게 표시됨
- 지표 해석이 제공됨

**예외 상황**:
- 지표 계산 실패 시 에러 메시지 표시
- 데이터가 부족하여 지표 계산이 불가능한 경우 안내 메시지 표시

---

### Use Case 4: 데이터 동기화

**액터**: 시스템 관리자 또는 사용자  
**전제 조건**: 웹 브라우저 접근 가능, 동기화 권한  
**목표**: Alpha Vantage API에서 최신 데이터를 가져와 데이터베이스에 저장

**시나리오**:
1. 사용자가 홈 페이지에서 "Sync Data" 버튼 클릭
2. 시스템이 Alpha Vantage API에 요청
3. 최신 주가 데이터 수신
4. Supabase 데이터베이스에 저장 (upsert)
5. 동기화 완료 메시지 표시

**데이터 소스**: 
- 서버: Alpha Vantage API → Supabase (stock_prices 테이블)
- 클라이언트: 동기화 상태만 표시 (로딩, 완료, 에러)

**성공 조건**: 
- 최신 데이터가 성공적으로 수신됨
- 데이터베이스에 정확하게 저장됨
- 동기화 완료 메시지가 표시됨

**예외 상황**:
- API 호출 한도 초과 시 에러 메시지 표시
- 네트워크 오류 시 재시도 옵션 제공
- 데이터베이스 저장 실패 시 에러 메시지 표시

---

### Use Case 5: 모바일에서 주가 확인

**액터**: 개인 투자자 (김투자)  
**전제 조건**: 모바일 디바이스, 웹 브라우저 접근 가능  
**목표**: 이동 중에 모바일로 주가 확인

**시나리오**:
1. 사용자가 모바일 브라우저에서 웹사이트 접속
2. 반응형 레이아웃으로 최적화된 화면 확인
3. 홈 페이지에서 현재 주가 정보 확인
4. 필요시 차트 페이지로 이동하여 차트 확인
5. 터치 제스처로 차트 조작 (줌, 팬)

**데이터 소스**: 
- 서버: 동일 (Alpha Vantage API 또는 Supabase)
- 클라이언트: 모바일 최적화된 UI로 데이터 표시

**성공 조건**: 
- 모바일 화면에 최적화된 레이아웃 표시
- 터치 제스처가 정상적으로 동작
- 로딩 시간이 데스크톱과 유사하게 빠름
- 데이터가 정확하게 표시됨

**예외 상황**:
- 모바일 네트워크가 느릴 경우 로딩 시간 증가
- 화면 크기에 따른 레이아웃 깨짐 방지

---

## 10. 페이지별 데이터 소스 및 서버/클라이언트 경계

### 10.1 홈 페이지 (`/`)

#### 10.1.1 데이터 소스
- **실시간 주가 정보**: Alpha Vantage API (GLOBAL_QUOTE) 또는 Supabase (최신 데이터)
- **데이터 업데이트**: 클라이언트에서 주기적 폴링 (선택적) 또는 사용자 요청 시

#### 10.1.2 서버/클라이언트 경계
- **서버 사이드 (API Route)**: 
  - `/api/stock/quote`: Alpha Vantage API 호출 또는 Supabase 조회
  - `/api/stock/sync`: Alpha Vantage API에서 데이터 동기화
- **클라이언트 사이드**: 
  - 주가 정보 표시 (Card 컴포넌트)
  - 동기화 버튼 클릭 이벤트
  - 로딩 상태 관리
  - 에러 처리

#### 10.1.3 데이터 흐름
```
클라이언트 (페이지 로드)
    ↓
서버 (API Route: /api/stock/quote)
    ↓
Supabase (최신 데이터 조회) 또는 Alpha Vantage API
    ↓
서버 (데이터 반환)
    ↓
클라이언트 (UI 렌더링)
```

### 10.2 차트 페이지 (`/chart`)

#### 10.2.1 데이터 소스
- **주가 데이터**: Supabase (stock_prices 테이블)
- **필터링**: 시간 범위에 따른 데이터 조회
- **데이터 업데이트**: 사용자가 시간 범위 변경 시

#### 10.2.2 서버/클라이언트 경계
- **서버 사이드 (API Route)**: 
  - `/api/stock/price`: Supabase에서 기간별 데이터 조회
  - 쿼리 파라미터: `limit`, `startDate`, `endDate`
- **클라이언트 사이드**: 
  - 시간 범위 선택 (Select 컴포넌트)
  - 차트 렌더링 (Recharts)
  - 차트 인터랙션 (호버, 줌 등)
  - 데이터 포맷팅

#### 10.2.3 데이터 흐름
```
클라이언트 (시간 범위 선택)
    ↓
서버 (API Route: /api/stock/price?limit=365)
    ↓
Supabase (stock_prices 테이블 조회)
    ↓
서버 (데이터 반환)
    ↓
클라이언트 (차트 렌더링)
```

### 10.3 분석 페이지 (`/analysis`)

#### 10.3.1 데이터 소스
- **기술적 지표**: Supabase (technical_indicators 테이블) 또는 실시간 계산
- **주가 데이터**: Supabase (stock_prices 테이블) - 지표 계산용
- **데이터 업데이트**: 주가 데이터 업데이트 시 지표 재계산

#### 10.3.2 서버/클라이언트 경계
- **서버 사이드 (API Route)**: 
  - `/api/stock/indicators`: 기술적 지표 조회 또는 계산
  - 지표 계산 로직 (SMA, EMA, RSI, MACD, Bollinger Bands)
  - Supabase에 지표 저장 (캐싱)
- **클라이언트 사이드**: 
  - 지표 선택 UI
  - 지표 차트 렌더링
  - 지표 해석 표시
  - 통계 정보 표시

#### 10.3.3 데이터 흐름
```
클라이언트 (분석 페이지 로드)
    ↓
서버 (API Route: /api/stock/indicators)
    ↓
Supabase (technical_indicators 테이블 조회 또는 stock_prices에서 계산)
    ↓
서버 (지표 데이터 반환)
    ↓
클라이언트 (지표 차트 및 분석 결과 표시)
```

### 10.4 데이터 동기화 (`/api/stock/sync`)

#### 10.4.1 데이터 소스
- **외부 API**: Alpha Vantage API (TIME_SERIES_DAILY_ADJUSTED)
- **저장소**: Supabase (stock_prices 테이블)

#### 10.4.2 서버/클라이언트 경계
- **서버 사이드 (API Route)**: 
  - Alpha Vantage API 호출
  - 데이터 변환 및 검증
  - Supabase에 저장 (upsert)
  - 동기화 결과 반환
- **클라이언트 사이드**: 
  - 동기화 버튼 클릭
  - 로딩 상태 표시
  - 완료/에러 메시지 표시

#### 10.4.3 데이터 흐름
```
클라이언트 (동기화 버튼 클릭)
    ↓
서버 (API Route: /api/stock/sync)
    ↓
Alpha Vantage API (주가 데이터 요청)
    ↓
서버 (데이터 변환 및 검증)
    ↓
Supabase (stock_prices 테이블에 저장)
    ↓
서버 (동기화 결과 반환)
    ↓
클라이언트 (완료 메시지 표시)
```

### 10.5 서버/클라이언트 경계 원칙

#### 10.5.1 서버 사이드에서 처리해야 할 항목
- **API 키 관리**: 환경 변수로 관리, 클라이언트에 노출 금지
- **데이터베이스 접근**: Supabase 클라이언트를 서버에서만 사용
- **데이터 변환**: API 응답 데이터를 데이터베이스 스키마에 맞게 변환
- **비즈니스 로직**: 기술적 지표 계산 등 복잡한 로직
- **에러 핸들링**: API 호출 실패, 데이터베이스 오류 처리

#### 10.5.2 클라이언트 사이드에서 처리해야 할 항목
- **UI 렌더링**: React 컴포넌트 렌더링
- **사용자 인터랙션**: 버튼 클릭, 폼 입력, 차트 인터랙션
- **상태 관리**: 로딩 상태, 에러 상태, 사용자 입력 상태
- **데이터 포맷팅**: 날짜 포맷, 숫자 포맷, 통화 포맷
- **차트 렌더링**: Recharts를 통한 차트 시각화

#### 10.5.3 보안 고려사항
- **API 키**: 서버 사이드에서만 접근 가능하도록 설정
- **데이터베이스**: Row Level Security (RLS) 정책으로 읽기 전용 접근 제어
- **입력 검증**: 클라이언트와 서버 양쪽에서 검증
- **에러 메시지**: 민감한 정보가 포함되지 않도록 주의

---

## 11. 성공 지표 (Success Metrics)

### 11.1 기술적 지표
- **페이지 로딩 시간**: 초기 로딩 < 3초
- **API 응답 시간**: 평균 < 2초
- **차트 렌더링 시간**: < 1초
- **에러율**: < 1%
- **가동 시간**: 99% 이상

### 11.2 사용자 경험 지표
- **페이지 체류 시간**: 평균 3분 이상
- **재방문률**: 주당 30% 이상
- **사용자 만족도**: 설문 조사를 통한 측정 (선택적)
- **모바일 사용률**: 전체 사용자의 40% 이상

### 11.3 비즈니스 지표 (향후)
- **일일 활성 사용자 (DAU)**: 목표 설정
- **월간 활성 사용자 (MAU)**: 목표 설정
- **사용자 유지율**: 목표 설정

---

## 12. 리스크 및 대응 방안

### 12.1 기술적 리스크

#### 12.1.1 Alpha Vantage API 제한
- **리스크**: 무료 플랜의 API 호출 제한 (5 calls/minute, 500 calls/day)
- **대응 방안**: 
  - 데이터 캐싱 전략 수립
  - 정기적 동기화로 API 호출 최소화
  - 필요시 유료 플랜 고려

#### 12.1.2 데이터베이스 비용
- **리스크**: 데이터 증가로 인한 Supabase 비용 증가
- **대응 방안**: 
  - 데이터 보관 기간 제한
  - 오래된 데이터 아카이빙
  - 필요시 데이터베이스 최적화

#### 12.1.3 성능 이슈
- **리스크**: 대량 데이터 조회 시 성능 저하
- **대응 방안**: 
  - 인덱스 최적화
  - 페이지네이션 구현
  - 데이터 캐싱

### 12.2 비즈니스 리스크

#### 12.2.1 사용자 부족
- **리스크**: 목표 사용자 수에 미달
- **대응 방안**: 
  - 마케팅 전략 수립
  - 사용자 피드백 수집 및 개선
  - SEO 최적화

#### 12.2.2 경쟁 서비스
- **리스크**: 기존 서비스와의 경쟁
- **대응 방안**: 
  - 차별화된 기능 제공
  - 사용자 경험 개선
  - 지속적인 기능 개발

---

## 13. 향후 확장 계획

### 13.1 단기 확장 (3-6개월)
- 여러 주식 지원 (AAPL, MSFT 등)
- 기술적 지표 상세 분석 페이지 완성
- 모바일 PWA 지원
- 다크 모드 지원

### 13.2 중기 확장 (6-12개월)
- 사용자 인증 및 개인화
- 포트폴리오 관리 기능
- 알림 시스템 (이메일, 푸시)
- 뉴스 피드 통합

### 13.3 장기 확장 (12개월 이상)
- 모바일 네이티브 앱 (React Native)
- AI 기반 주가 예측
- 소셜 기능 (공유, 코멘트)
- 프리미엄 기능 (고급 분석 도구)

---

## 14. 부록

### 14.1 용어 정의
- **SMA (Simple Moving Average)**: 단순 이동평균
- **EMA (Exponential Moving Average)**: 지수 이동평균
- **RSI (Relative Strength Index)**: 상대강도지수
- **MACD (Moving Average Convergence Divergence)**: 이동평균 수렴 확산
- **Bollinger Bands**: 볼린저 밴드

### 14.2 참고 자료
- Alpha Vantage API 문서: https://www.alphavantage.co/documentation/
- Supabase 문서: https://supabase.com/docs
- Next.js 문서: https://nextjs.org/docs
- Recharts 문서: https://recharts.org/

### 14.3 연락처
- 프로젝트 리더: [이름]
- 기술 리더: [이름]
- 디자인 리더: [이름]

---

**문서 끝**

